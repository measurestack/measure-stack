{
  "name": "Measure-JS API Tests",
  "description": "Comprehensive test suite for Measure-JS analytics API",
  "baseUrl": "{{DEPLOYED_URL}}",
  "variables": {
    "DEPLOYED_URL": "https://your-service-name-xxxxx-uc.a.run.app"
  },
  "endpoints": [
    {
      "name": "Health Check",
      "method": "GET",
      "path": "/health",
      "description": "Test the health endpoint",
      "tests": [
        {
          "name": "Health Check Success",
          "description": "Should return 200 OK with service status",
          "expectedStatus": 200,
          "expectedBody": {
            "status": "ok",
            "service": "measure-js"
          },
          "assertions": [
            "response.status === 200",
            "response.body.status === 'ok'",
            "response.body.service === 'measure-js'",
            "response.body.timestamp !== undefined"
          ]
        }
      ]
    },
    {
      "name": "CORS Preflight",
      "method": "OPTIONS",
      "path": "/events",
      "description": "Test CORS preflight request",
      "headers": {
        "Origin": "https://9fwr.com",
        "Access-Control-Request-Method": "POST",
        "Access-Control-Request-Headers": "Content-Type"
      },
      "tests": [
        {
          "name": "CORS Headers Present",
          "description": "Should return CORS headers",
          "expectedStatus": 200,
          "assertions": [
            "response.headers['Access-Control-Allow-Origin'] !== undefined",
            "response.headers['Access-Control-Allow-Methods'] !== undefined",
            "response.headers['Access-Control-Allow-Headers'] !== undefined"
          ]
        }
      ]
    },
    {
      "name": "Page View Event",
      "method": "POST",
      "path": "/events",
      "description": "Send a page view tracking event",
      "headers": {
        "Content-Type": "application/json",
        "Origin": "https://9fwr.com",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
      },
      "body": {
        "et": "page_view",
        "en": "homepage",
        "url": "https://9fwr.com",
        "r": "https://google.com",
        "p": {
          "page_title": "Homepage",
          "test": true
        }
      },
      "tests": [
        {
          "name": "Page View Success",
          "description": "Should accept page view event",
          "expectedStatus": 200,
          "expectedBody": {
            "message": "ok"
          },
          "assertions": [
            "response.status === 200",
            "response.body.message === 'ok'",
            "response.body.c !== undefined",
            "response.body.h !== undefined"
          ]
        }
      ]
    },
    {
      "name": "Click Event",
      "method": "POST",
      "path": "/events",
      "description": "Send a click tracking event",
      "headers": {
        "Content-Type": "application/json",
        "Origin": "https://9fwr.com",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
      },
      "body": {
        "et": "click",
        "en": "cta_button",
        "url": "https://9fwr.com",
        "p": {
          "button_id": "cta-primary",
          "button_text": "Get Started",
          "test": true
        }
      },
      "tests": [
        {
          "name": "Click Event Success",
          "description": "Should accept click event",
          "expectedStatus": 200,
          "assertions": [
            "response.status === 200",
            "response.body.message === 'ok'"
          ]
        }
      ]
    },
    {
      "name": "Form Submit Event",
      "method": "POST",
      "path": "/events",
      "description": "Send a form submission event",
      "headers": {
        "Content-Type": "application/json",
        "Origin": "https://9fwr.com",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
      },
      "body": {
        "et": "form_submit",
        "en": "contact_form",
        "url": "https://9fwr.com/contact",
        "p": {
          "form_id": "contact-form",
          "form_fields": ["name", "email", "message"],
          "test": true
        }
      },
      "tests": [
        {
          "name": "Form Submit Success",
          "description": "Should accept form submission event",
          "expectedStatus": 200,
          "assertions": [
            "response.status === 200",
            "response.body.message === 'ok'"
          ]
        }
      ]
    },
    {
      "name": "Consent Grant Event",
      "method": "POST",
      "path": "/events",
      "description": "Send a consent grant event",
      "headers": {
        "Content-Type": "application/json",
        "Origin": "https://9fwr.com",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
      },
      "body": {
        "et": "consent",
        "en": "consent",
        "p": {
          "id": true
        }
      },
      "tests": [
        {
          "name": "Consent Grant Success",
          "description": "Should accept consent grant and set cookies",
          "expectedStatus": 200,
          "assertions": [
            "response.status === 200",
            "response.body.message === 'ok'",
            "response.headers['Set-Cookie'] !== undefined"
          ]
        }
      ]
    },
    {
      "name": "Consent Revoke Event",
      "method": "POST",
      "path": "/events",
      "description": "Send a consent revoke event",
      "headers": {
        "Content-Type": "application/json",
        "Origin": "https://9fwr.com",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
      },
      "body": {
        "et": "consent",
        "en": "consent",
        "p": {
          "id": false
        }
      },
      "tests": [
        {
          "name": "Consent Revoke Success",
          "description": "Should accept consent revoke",
          "expectedStatus": 200,
          "assertions": [
            "response.status === 200",
            "response.body.message === 'ok'"
          ]
        }
      ]
    },
    {
      "name": "Query Parameters Event",
      "method": "GET",
      "path": "/events?et=page_view&en=test_page&url=https://9fwr.com/test&r=https://google.com",
      "description": "Send event via query parameters",
      "headers": {
        "Origin": "https://9fwr.com",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
      },
      "tests": [
        {
          "name": "Query Params Success",
          "description": "Should accept event via query parameters",
          "expectedStatus": 200,
          "assertions": [
            "response.status === 200",
            "response.body.message === 'ok'"
          ]
        }
      ]
    },
    {
      "name": "Form Data Event",
      "method": "POST",
      "path": "/events",
      "description": "Send event via form data",
      "headers": {
        "Content-Type": "application/x-www-form-urlencoded",
        "Origin": "https://9fwr.com",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
      },
      "body": "et=page_view&en=form_test&url=https://9fwr.com/form&p[test]=true",
      "tests": [
        {
          "name": "Form Data Success",
          "description": "Should accept event via form data",
          "expectedStatus": 200,
          "assertions": [
            "response.status === 200",
            "response.body.message === 'ok'"
          ]
        }
      ]
    }
  ],
  "testSuites": [
    {
      "name": "Basic Functionality",
      "description": "Test basic API functionality",
      "endpoints": ["Health Check", "Page View Event", "Click Event"]
    },
    {
      "name": "CORS Testing",
      "description": "Test CORS functionality",
      "endpoints": ["CORS Preflight", "Page View Event"]
    },
    {
      "name": "Event Types",
      "description": "Test different event types",
      "endpoints": ["Page View Event", "Click Event", "Form Submit Event"]
    },
    {
      "name": "Consent Management",
      "description": "Test consent functionality",
      "endpoints": ["Consent Grant Event", "Consent Revoke Event"]
    },
    {
      "name": "Data Formats",
      "description": "Test different data input formats",
      "endpoints": ["Page View Event", "Query Parameters Event", "Form Data Event"]
    }
  ]
}
